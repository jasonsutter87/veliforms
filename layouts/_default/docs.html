{{ define "main" }}
<style>
  .docs-layout {
    display: grid;
    grid-template-columns: 260px 1fr 200px;
    gap: 40px;
    padding: 40px 0;
    min-height: calc(100vh - 200px);
  }
  .docs-sidebar {
    position: sticky;
    top: 40px;
    height: fit-content;
  }
  .docs-nav {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
  }
  .docs-nav-section {
    margin-bottom: 24px;
  }
  .docs-nav-section:last-child { margin-bottom: 0; }
  .docs-nav-title {
    font-size: 0.75rem;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 12px;
    font-weight: 600;
  }
  .docs-nav a {
    display: block;
    padding: 8px 12px;
    color: var(--text-muted);
    text-decoration: none;
    border-radius: 6px;
    font-size: 0.9rem;
    margin-bottom: 2px;
  }
  .docs-nav a:hover { background: var(--border); color: var(--text); }
  .docs-nav a.active { background: var(--primary); color: white; }
  .docs-content {
    max-width: 800px;
  }
  .docs-content h1 {
    font-size: 2.5rem;
    margin-bottom: 16px;
  }
  .docs-content .lead {
    font-size: 1.125rem;
    color: var(--text-muted);
    margin-bottom: 40px;
  }
  .docs-content h2 {
    font-size: 1.5rem;
    margin-top: 48px;
    margin-bottom: 16px;
    padding-top: 24px;
    border-top: 1px solid var(--border);
  }
  .docs-content h2:first-of-type { border-top: none; margin-top: 0; padding-top: 0; }
  .docs-content h3 {
    font-size: 1.125rem;
    margin-top: 32px;
    margin-bottom: 12px;
  }
  .docs-content p {
    margin-bottom: 16px;
    line-height: 1.7;
  }
  .docs-content pre {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 20px;
    overflow-x: auto;
    margin-bottom: 24px;
  }
  .docs-content code {
    font-family: 'SF Mono', 'Fira Code', monospace;
    font-size: 0.875rem;
  }
  .docs-content :not(pre) > code {
    background: var(--surface);
    padding: 2px 6px;
    border-radius: 4px;
  }
  .docs-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 24px;
  }
  .docs-content th, .docs-content td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid var(--border);
  }
  .docs-content th {
    font-weight: 600;
    background: var(--surface);
  }
  .endpoint-block {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    margin-bottom: 24px;
    overflow: hidden;
  }
  .endpoint-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
  }
  .method {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
  }
  .method.post { background: #10b98130; color: #10b981; }
  .method.get { background: #6366f130; color: #6366f1; }
  .method.delete { background: #ef444430; color: #ef4444; }
  .endpoint-path {
    font-family: monospace;
    font-size: 0.9rem;
  }
  .endpoint-body { padding: 20px; }
  .param-table { margin-top: 16px; }
  .param-table td:first-child {
    font-family: monospace;
    font-size: 0.875rem;
    color: var(--primary);
  }
  .toc {
    position: sticky;
    top: 40px;
    height: fit-content;
  }
  .toc-title {
    font-size: 0.75rem;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 12px;
    font-weight: 600;
  }
  .toc a {
    display: block;
    padding: 6px 0;
    color: var(--text-muted);
    text-decoration: none;
    font-size: 0.85rem;
    border-left: 2px solid var(--border);
    padding-left: 12px;
  }
  .toc a:hover { color: var(--text); border-color: var(--text-muted); }
  .toc a.active { color: var(--primary); border-color: var(--primary); }
  .callout {
    padding: 16px 20px;
    border-radius: 8px;
    margin-bottom: 24px;
  }
  .callout.warning {
    background: #f59e0b15;
    border: 1px solid #f59e0b40;
  }
  .callout.warning strong { color: #f59e0b; }
  .callout.info {
    background: #6366f115;
    border: 1px solid #6366f140;
  }
  .callout.info strong { color: #6366f1; }
  .callout.success {
    background: #10b98115;
    border: 1px solid #10b98140;
  }
  .callout.success strong { color: #10b981; }

  /* Mobile nav toggle */
  .docs-mobile-toggle {
    display: none;
    width: 100%;
    padding: 12px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-size: 0.9rem;
    cursor: pointer;
    margin-bottom: 20px;
    text-align: left;
  }
  .docs-mobile-toggle::after {
    content: 'â–¼';
    float: right;
    font-size: 0.75rem;
    transition: transform 0.2s;
  }
  .docs-mobile-toggle.active::after {
    transform: rotate(180deg);
  }

  /* Tablet - hide TOC */
  @media (max-width: 1100px) {
    .docs-layout { grid-template-columns: 260px 1fr; }
    .toc { display: none; }
  }

  /* Mobile */
  @media (max-width: 768px) {
    .docs-layout {
      grid-template-columns: 1fr;
      gap: 0;
      padding: 20px 0;
    }
    .docs-mobile-toggle { display: block; }
    .docs-sidebar {
      position: static;
      margin-bottom: 24px;
    }
    .docs-nav {
      display: none;
      padding: 16px;
    }
    .docs-nav.active { display: block; }
    .docs-nav-section { margin-bottom: 20px; }
    .docs-nav a { padding: 10px 12px; }
    .docs-content h1 { font-size: 1.75rem; }
    .docs-content .lead { font-size: 1rem; margin-bottom: 32px; }
    .docs-content h2 { font-size: 1.25rem; margin-top: 36px; }
    .docs-content h3 { font-size: 1rem; }
    .docs-content pre { padding: 16px; font-size: 0.8rem; }
    .docs-content code { font-size: 0.8rem; }
    .endpoint-header { flex-wrap: wrap; padding: 12px 16px; }
    .endpoint-path { font-size: 0.8rem; word-break: break-all; }
    .endpoint-body { padding: 16px; }
    .docs-content table { font-size: 0.85rem; }
    .docs-content th, .docs-content td { padding: 10px 8px; }
    .callout { padding: 12px 16px; font-size: 0.9rem; }
  }
</style>

<div class="container">
  <div class="docs-layout">
    <!-- Mobile nav toggle -->
    <button class="docs-mobile-toggle" onclick="toggleDocsNav()">Documentation Menu</button>

    <!-- Sidebar Navigation -->
    <aside class="docs-sidebar">
      <nav class="docs-nav" id="docs-nav">
        <div class="docs-nav-section">
          <div class="docs-nav-title">Getting Started</div>
          <a href="/docs/" class="active">Introduction</a>
          <a href="/docs/quickstart/">Quick Start</a>
          <a href="/docs/concepts/">Core Concepts</a>
        </div>

        <div class="docs-nav-section">
          <div class="docs-nav-title">SDK</div>
          <a href="/docs/sdk/installation/">Installation</a>
          <a href="/docs/sdk/configuration/">Configuration</a>
          <a href="/docs/sdk/encryption/">Encryption</a>
          <a href="/docs/sdk/pii-detection/">PII Detection</a>
          <a href="/docs/sdk/events/">Events</a>
        </div>

        <div class="docs-nav-section">
          <div class="docs-nav-title">API Reference</div>
          <a href="/docs/api/authentication/">Authentication</a>
          <a href="/docs/api/forms/">Forms</a>
          <a href="/docs/api/submissions/">Submissions</a>
          <a href="/docs/api/webhooks/">Webhooks</a>
        </div>

        <div class="docs-nav-section">
          <div class="docs-nav-title">Guides</div>
          <a href="/docs/guides/key-management/">Key Management</a>
          <a href="/docs/guides/gdpr/">GDPR Compliance</a>
          <a href="/docs/guides/self-hosting/">Self Hosting</a>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="docs-content">
      {{ .Content }}
    </main>

    <!-- Table of Contents -->
    <aside class="toc">
      <div class="toc-title">On This Page</div>
      {{ with .TableOfContents }}
        {{ . }}
      {{ end }}
    </aside>
  </div>
</div>

<script>
  function toggleDocsNav() {
    const nav = document.getElementById('docs-nav');
    const btn = document.querySelector('.docs-mobile-toggle');
    nav.classList.toggle('active');
    btn.classList.toggle('active');
  }
</script>
{{ end }}
