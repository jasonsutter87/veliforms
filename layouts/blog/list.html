{{ define "main" }}
<section class="blog-hero">
  <div class="site-container-340">
    <h1>Blog</h1>
    <p class="lead">Privacy-focused insights, tutorials, and form security best practices from the VeilForms team.</p>
  </div>
</section>

<section class="blog-list-section">
  <div class="site-container-340">
    {{ $posts := where .Site.RegularPages "Section" "blog" }}
    {{ if $posts }}
    <div class="blog-grid">
      {{ range $posts.ByDate.Reverse }}
      <article class="blog-card">
        {{ if .Params.image }}
        <div class="blog-card-image">
          <a href="{{ .Permalink }}">
            <img src="{{ .Params.image }}" alt="{{ .Title }}" loading="lazy">
          </a>
        </div>
        {{ end }}
        <div class="blog-card-content">
          <div class="blog-meta">
            {{ if .Params.category }}
            <span class="blog-category">{{ .Params.category }}</span>
            {{ end }}
            <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time>
          </div>
          <h2><a href="{{ .Permalink }}">{{ .Title }}</a></h2>
          <p>{{ .Description | truncate 160 }}</p>
          <a href="{{ .Permalink }}" class="read-more">Read more</a>
        </div>
      </article>
      {{ end }}
    </div>
    {{ else }}
    <p class="no-posts">No blog posts yet. Check back soon!</p>
    {{ end }}
  </div>
</section>
{{ end }}
